package com.internousdev.myec.dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

import com.internousdev.myec.dto.InquiryDTO;
import com.internousdev.myec.util.DBConnector;

public class InquiryCompleteDAO {

	//Listで宣言、ArrayListでインスタンス生成を行う
	List<InquiryDTO> inquiryDTOList = new ArrayList<InquiryDTO>();

	/**
	 * ★実行メソッド
	 * 	入力された問い合わせデータをDBから取得、
	 * 	情報をinquiryDTOに格納、最後にaddで
	 * inquiryDTOに格納した値をinquiryDTOListに格納する
	 */
	public List<InquiryDTO> select(){

		//DBに接続

		DBConnector dbConnector = new DBConnector();
		Connection connection = dbConnector.getConnection();

		String sql = "select * from inquiry";

	try{

		PreparedStatement preparedStatement = connection.prepareStatement(sql);
		ResultSet resultSet = preparedStatement.executeQuery();

		//DBからgetterで取得した値をsetterでInquiryDTOに格納

		while(resultSet.next()){
			InquiryDTO inquiryDTO = new InquiryDTO();
			inquiryDTO.setInquiry_name(resultSet.getString("inquiry_name"));
			inquiryDTO.setInquiry_mail(resultSet.getString("inquiry_mail"));
			inquiryDTO.setQtype(resultSet.getString("qtype"));
			inquiryDTO.setBody(resultSet.getString("body"));
			inquiryDTOList.add(inquiryDTO);
		}

	}catch(SQLException e){
		e.printStackTrace();
	}

	try{
		connection.close();

	}catch(Exception e){
		e.printStackTrace();
	}

	return inquiryDTOList;

}

	/**
	 * ★実行メソッド
	 * 	入力された値をDBに保管する
	 */


public int insert(String inqyiry_name, String inquiry_mail, String qtype, String body){
	int ret = 0;
	DBConnector dbConnector = new DBConnector();
	Connection connection = dbConnector.getConnection();

	//どこにinsertするかを指定
	String sql = "insert into inquiry values(?,?,?,?)";



}