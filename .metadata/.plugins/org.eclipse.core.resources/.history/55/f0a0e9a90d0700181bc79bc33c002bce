<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags"%>

<!DOCTYPE html>
<html>
<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="description" content="" />
<meta name="keywords" content="" />
<link rel="stylesheet" type="text/css" href="./css/item_style.css">
<link rel="stylesheet" type="text/css" href="./css/basis_style.css">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.min.js"></script>

  <script>
    $(document).ready(function(){
      $('abc').bxSlider();
    });
  </script>

<title>MyPage画面</title>
</head>
<body>

<!-- ヘッダー部分 -->
<div class="container">
<header>
	<div id="header">
		<div class="header-logo">SWEETOPIA</div>

	<div class="top-menu">

	<div class="left-list">
		<ul>
			<li><a href='<s:url action="GoHomeAction"/>'>TOP</a></li>
			<li><a href='<s:url action="HomeAction"/>'>PRODUCT</a></li>
			<li><a href='<s:url action="UserCreateAction"/>'>SIGNUP</a></li>
		</ul>
	</div>

	<div class="right-list">
		<ul>
			<li><a href='<s:url action="LoginPageAction"/>'>LOGIN</a></li>
			<li><a href='<s:url action="MyPageAction"/>'>MYPAGE</a></li>
			<li><a href='<s:url action="LogoutAction"/>'>LOGOUT</a></li>
			<li><a href='<s:url action="InquiryAction"/>'>MAIL</a></li>
		</ul>
	</div>
	</div>
</div>
</header>

<!-- メイン部分 -->
<div class="top-push"></div>
<div id="main">
<div class="main-contents">
	<div class="top"></div>
	<h3>MY PAGE</h3>

	<!-- ユーザー情報 -->
	<br><br><br>
	<span>USER INFORMATION</span>
	<br><br><br>
	<div class="user-table">
	<table>
		<s:form>
		<tr>
				<td>ユーザー名:</td>
				<td><s:property value="session.userName"/></td>
		</tr>
		<tr>
				<td>お届け先住所:</td>
				<td><s:property value="session.userAddress"/></td>
		</tr>
		<tr>
				<td>電話番号:</td>
				<td><s:property value="session.userTell"/></td>
		</tr>
		<tr>
				<td>メールアドレス:</td>
				<td><s:property value="session.userMail"/></td>
		</tr>
		</s:form>
		</table>
	</div>

	<!-- 購入履歴（購入したものがない場合） -->
	<div>
	<s:if test="myPageList == null">
		<p>ご購入情報はありません。</p>
		<br>
	</s:if>

	<!-- 購入したものがある場合 -->
	<s:elseif test="message == null">
		<br><br>
		<span>PURCHASE HISTORY</span>
		<table class="myPageTable">
		<tr>
			<th class="myPageTh">商品名</th>
			<th class="myPageTh">価格</th>
			<th class="myPageTh">購入個数</th>
			<th class="myPageTh">支払方法</th>
			<th class="myPageTh">購入日</th>
		</tr>

			<s:iterator value="myPageList">
			<tr>
				<td class="myPageTd"><s:property value="itemName"/></td>
				<td class="myPageTd"><s:property value="totalPrice"/><span>円</span></td>
				<td class="myPageTd"><s:property value="totalCount"/><span>個</span></td>
				<td class="myPageTd"><s:property value="payment"/></td>
				<td class="myPageTd"><s:property value="insert_date"/></td>
			</tr>
			<br>
			</s:iterator>
		</table>
		<br>

		<!-- 履歴の削除機能 -->

		<s:form action="MyPageAction">
			<input type="hidden" name="deleteFlg" value="1">
			<s:submit class="button" value="履歴の削除" method="delete"/>
		</s:form>
	</s:elseif>
	</div>

	<!-- message(MyPageActionで定義した変数）に値が入っている場合 -->
	<s:if test="message != null">
		<p><s:property value="message"/></p>
	</s:if>

	<br>
	<br>

		<div id="text-link">
			<p>ユーザー情報を変更する場合はこちら</p>
			<p>Homeへ戻る場合はこちら</p>
			<p>ログアウトする場合はこちら</p>
		</div>


</div>
</div>

<div class="push"></div>

<!-- フッター部分 -->
<footer>

	<div class="h"></div>

	<div class="footer-message">
		Copyright©2018 SWEETOPIA. All Rights Reserved.
	</div>

</footer>
</div>

<script type="text/javascript" src="./script/script.js"></script>
</body>
</html>